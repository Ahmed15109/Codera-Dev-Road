@model progect_DEPI.Models.Lesson

<div class="container mt-4">
    <nav aria-label="breadcrumb" class="mb-4">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="@Url.Action("CourseLessons", new { courseId = Model.CourseId })">Course</a></li>
            <li class="breadcrumb-item active" aria-current="page">@Model.Title</li>
        </ol>
    </nav>

    <div class="card shadow-sm">
        <div class="card-header bg-light">
            <h2 class="mb-0">@Model.Title</h2>
            <span class="badge bg-info">Level: @Model.Level</span>
        </div>
        <div class="card-body">
            @if (!string.IsNullOrEmpty(Model.VideoUrl))
            {
                <div class="ratio ratio-16x9 mb-4 rounded-3 overflow-hidden shadow-sm">
                    <video controls class="w-100">
                        <source src="@Model.VideoUrl" type="video/mp4">
                        Your browser does not support the video tag.
                    </video>
                </div>
            }
            else if (!string.IsNullOrEmpty(Model.ImageUrl))
            {
                <div class="text-center mb-4">
                    <img src="@Model.ImageUrl" alt="Lesson Image" class="img-fluid rounded-3 shadow-sm" style="max-width: 100%; height: auto;" />
                </div>
            }
            else
            {
                <div class="alert alert-warning mb-4">No media available for this lesson.</div>
            }

            <div class="lesson-content p-3 bg-light rounded-3">
                <h4 class="mb-3">Lesson Content</h4>
                <div class="content-text">@Html.Raw(Model.Content)</div>
            </div>
        </div>
        <div class="card-footer bg-transparent">
            <div class="d-flex justify-content-between">
                <a href="@Url.Action("CourseLessons", new { courseId = Model.CourseId })" class="btn btn-outline-secondary">
                    <i class="bi bi-arrow-left"></i> Back to Course
                </a>
                @if (User.IsInRole("Admin"))
                {
                    <div>
                        <a href="@Url.Action("Edit", new { id = Model.LessonId })" class="btn btn-outline-primary me-2">Edit</a>
                        <a href="@Url.Action("Delete", new { id = Model.LessonId })" class="btn btn-outline-danger"
                           onclick="return confirm('Are you sure you want to delete this lesson?')">Delete</a>
                    </div>
                }
            </div>
        </div>
    </div>
</div>